<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Juego Adivina la Canci√≥n</title>
  <style>
    body {
      background: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    #player {
      margin-top: 30px;
    }
    button {
      background: #1db954;
      color: white;
      border: none;
      border-radius: 25px;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #1ed760;
    }
  </style>
</head>
<body>

  <h1>üéµ Adivina la Canci√≥n (Versi√≥n Spotify)</h1>

  <div id="player">
    <audio id="audioPlayer" controls></audio>
    <div>
      <button id="playBtn">‚ñ∂Ô∏è Play</button>
      <button id="nextBtn">‚è≠Ô∏è Siguiente</button>
      <button id="revealBtn">‚ùì Revelar Canci√≥n</button>
    </div>
    <p id="songName" style="margin-top: 20px; font-weight: bold;"></p>
  </div>

  <script>
    // üîë TOKEN TEMPORAL DE SPOTIFY (reemplazalo con el tuyo)
    const TOKEN = "1POdFZRZbvb...qqillRxMr2z";

    // Lista de canciones base (puede ser din√°mica despu√©s)
    const trackIds = [
      "4uLU6hMCjMI75M1A2tKUQC", // Eminem - Lose Yourself
      "3n3Ppam7vgaVa1iaRUc9Lp", // Michael Jackson - Billie Jean
      "0VjIjW4GlUZAMYd2vXMi3b", // The Weeknd - Blinding Lights
      "7GhIk7Il098yCjg4BQjzvb", // Rick Astley - Never Gonna Give You Up
      "3AJwUDP919kvQ9QcozQPxg"  // Queen - Bohemian Rhapsody
    ];

    let currentIndex = 0;
    const audio = document.getElementById("audioPlayer");
    const songName = document.getElementById("songName");

    async function loadTrack(index) {
      const trackId = trackIds[index];
      const res = await fetch(`https://api.spotify.com/v1/tracks/${trackId}`, {
        headers: { Authorization: `Bearer ${TOKEN}` }
      });
      const data = await res.json();

      // Mostramos solo el nombre cuando se revele
      songName.textContent = "";

      // Obtenemos la preview (30 segundos)
      if (data.preview_url) {
        audio.src = data.preview_url;
      } else {
        audio.src = "";
        alert("Esta canci√≥n no tiene preview disponible üò¢");
      }

      audio.dataset.songName = `${data.name} - ${data.artists[0].name}`;
    }

    document.getElementById("playBtn").addEventListener("click", () => {
      if (audio.src) audio.play();
      else loadTrack(currentIndex).then(() => audio.play());
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % trackIds.length;
      loadTrack(currentIndex);
    });

    document.getElementById("revealBtn").addEventListener("click", () => {
      songName.textContent = audio.dataset.songName || "Ninguna canci√≥n cargada";
    });

    // Cargar la primera al iniciar
    loadTrack(currentIndex);
  </script>
</body>
</html>
